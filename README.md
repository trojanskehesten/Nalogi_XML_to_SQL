# Перевод данных о налогах в РФ из файлов XML в БД SQL
### Используются MS SQL Server 2017 и язык T-SQL
XML файлы взяты отсюда: https://data.nalog.ru/opendata/7707329152-paytax/

Инструкция по использованию: <br>
1. Поменять исходные данные в "Исходных данных" ниже, почти сразу после этой инcтрукции
Так как поиск в основном будет производиться в основном по ИННЮЛ,
то его необходимо сделать индексированным, некластеризованным.

2. Переименовать все файлы xml в 0.xml. На windows получится что-то типа:
"0 (1100).xml"
Этот шаг необходим, так как на компьютере может НЕ быть прав администратора (в таком случае простой перебор
всех файлов в каталоге невозможен).

3. Запустить скрипт. В ходе выполнения программы (в моем случае 12.5к файлов обработано за 23 мин)
через каждые 500 файлов будет выдан SELECT с количеством обработанных файлов. 
Можно отследить текущее положение загрузки.

4. Проверить на наличие ошибки после выполнения программы. Для этого проверить значение двух последних селектов.
Предпоследний показывает список незагруженных xml-файлов (если имеются);
последний - 20 первых строк новой таблицы. Визуально посмотреть, что все ок.

[5. Индексирование можно сделать и для других столбцов. Однако таблица будет весить больше.
Для этого: нажать на "+" у таблицы -> правой кнопкой на "Индексы" -> "Создать индекс" -> "Некластеризованный индекс".
Справа в новом окне "Добавить..." -> галочку напротив необходимого(ых) столбца(ов) -> "ОК" -> "ОК". 
Необходимо ожидать несколько секунд/минут.]
